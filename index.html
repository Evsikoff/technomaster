<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ТЕХНОМАСТЕР - Стартовый экран</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <script src="https://yandex.ru/games/sdk/v2"></script>
    <script>
        // Определяем переменную окружения для контроллера хранилища
        // Если мы НЕ в iframe Яндекс Игр - используем localStorage
        (function() {
            try {
                var isInYandexIframe = (window !== window.top) &&
                    (document.referrer.includes('yandex.ru') || document.referrer.includes('yandex.net'));
                var isYandexHost = window.location.hostname.endsWith('yandex.ru') ||
                    window.location.hostname.endsWith('yandex.net');

                if (!isInYandexIframe && !isYandexHost) {
                    window.userDataStorage = 'localStorage';
                    console.log('ENV: userDataStorage = "localStorage" (не Яндекс Игры)');
                }
            } catch (e) {
                // При ошибке доступа к window.top (cross-origin) - мы в iframe
                console.log('ENV: Возможно в iframe Яндекс Игр');
            }
        })();
    </script>
</head>
<body class="start-screen">
    <div class="start-screen-frame">
        <header class="game-header">
            <h1 class="game-title">ТЕХНОМАСТЕР</h1>
        </header>

        <main class="start-main">
            <button class="deck-banner" id="deckBanner" type="button">
                МОЯ КОЛОДА
            </button>

            <section class="opponents-section">
                <h2 class="section-title">Соперники</h2>
                <div class="opponents-grid" id="opponentsGrid">
                    <!-- Бейджи соперников будут добавлены динамически -->
                </div>
            </section>
        </main>
    </div>

    <script src="js/yandex-sdk.js"></script>
    <script src="js/card-renderer.js"></script>
    <script src="js/start-screen.js"></script>
</body>
</html>
